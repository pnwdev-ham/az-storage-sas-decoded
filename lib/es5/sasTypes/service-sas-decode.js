"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(r){for(var i,s=1,t=arguments.length;s<t;s++){i=arguments[s];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}return r},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.arePermissionsInOrder=exports.decodeServiceTokenQueryString=void 0;var service_sas_types_1=require("./service-sas-types");function decodeProperties(r,i){var s={};if(r.length===0)return{};for(var t=Object.keys(i),e=0;e<t.length-1;e++){var n=t[e];r.includes(n)&&(s[n]=i[n])}return s}function decodeServiceTokenQueryString(r){var i,s,t={},e=Object.keys(r);if(e.length===0)return{};if(t=__assign({},decodeProperties(e,service_sas_types_1.serviceSasBasicProperties)),t=__assign(__assign({},t),decodeProperties(e,service_sas_types_1.accessPolicyProperties)),t=__assign(__assign({},t),decodeProperties(e,service_sas_types_1.blobStorageAndAzureFileResponseHeaderOverrideParameters)),e.includes("sp")){var n=(i=r?.sp)===null||i===void 0?void 0:i.split("");n&&(t.sp.permissions=decodeProperties(n,service_sas_types_1.blobStoragePermissions))}if(e.includes("sr")){var o=(s=r?.sr)===null||s===void 0?void 0:s.split("");o&&(t.sr.resources=decodeProperties(o,service_sas_types_1.resource))}return t}exports.decodeServiceTokenQueryString=decodeServiceTokenQueryString;function arePermissionsInOrder(r){if(!r||r.length===0)return!0;var i="racwdxltmeopi".split(""),s=r.split("").sort(function(t,e){return i.indexOf(t)-i.indexOf(e)}).join("");return r===s}exports.arePermissionsInOrder=arePermissionsInOrder;