var h=function(r,l,t,a){function i(e){return e instanceof t?e:new t(function(o){o(e)})}return new(t||(t=Promise))(function(e,o){function u(c){try{n(a.next(c))}catch(f){o(f)}}function s(c){try{n(a.throw(c))}catch(f){o(f)}}function n(c){c.done?e(c.value):i(c.value).then(u,s)}n((a=a.apply(r,l||[])).next())})},d=function(r,l){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,i,e,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(n){return function(c){return s([n,c])}}function s(n){if(a)throw new TypeError("Generator is already executing.");for(;t;)try{if(a=1,i&&(e=n[0]&2?i.return:n[0]?i.throw||((e=i.return)&&e.call(i),0):i.next)&&!(e=e.call(i,n[1])).done)return e;switch(i=0,e&&(n=[n[0]&2,e.value]),n[0]){case 0:case 1:e=n;break;case 4:return t.label++,{value:n[1],done:!1};case 5:t.label++,i=n[1],n=[0];continue;case 7:n=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(n[0]===6||n[0]===2)){t=0;continue}if(n[0]===3&&(!e||n[1]>e[0]&&n[1]<e[3])){t.label=n[1];break}if(n[0]===6&&t.label<e[1]){t.label=e[1],e=n;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(n);break}e[2]&&t.ops.pop(),t.trys.pop();continue}n=l.call(r,t)}catch(c){n=[6,c],i=0}finally{a=e=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};import{generateBlobSASQueryParameters as S,ContainerSASPermissions as w,BlobSASPermissions as y,StorageSharedKeyCredential as b,SASProtocol as m}from"@azure/storage-blob";export function createServiceSasTokenFromOptions(){return h(this,void 0,void 0,function(){var r,l;return d(this,function(t){return r={},l=getServiceSasToken(r.ResourceName,r.ResourceKey,r.ContainerName,r.ServiceSasPermissions,r.NowMinusMinutes,r.NowPlusMinutes,r.BlobName),[2]})})}export function getServiceSasToken(r,l,t,a,i,e,o){try{var u=new b(r,l),s={containerName:t,permissions:void 0,protocol:m.Https,startsOn:i,expiresOn:e};o?(s.blobName=o,s.permissions=y.parse(a),console.log("Scoped to blob named '".concat(o,"' permissions: ").concat(s.permissions,`
`))):(s.permissions=w.parse(a),console.log("Scoped to container named '".concat(t,"' permissions: ").concat(s.permissions,`
`)));var n=S(s,u).toString();return o?"https://".concat(r,".blob.core.windows.net/").concat(t,"/").concat(o,"?").concat(n):"https://".concat(r,".blob.core.windows.net/").concat(t,"?").concat(n)}catch(c){console.log("generateBlobSASQueryParameters ".concat(c.message))}}